___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "CYTRIO Cookie Consent Template",
  "categories": ["TAG_MANAGEMENT", "PERSONALIZATION"],
  "brand": {
    "id": "cytrio",
    "displayName": "CYTRIO",
    "thumbnail": "data:image/png;base64,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\u003d\u003d"
  },
  "description": "CYTRIO CMP makes your website compliant with the global data privacy laws such as the GDPR, CCPA/CPRA, LGPD etc.  Add CYTRIO to your website via GTM and integrate seamlessly with Google Consent Mode.",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "TEXT",
    "name": "tenantId",
    "displayName": "Tenant ID",
    "simpleValueType": true,
    "help": "Log into your Cytrio account.  Under the Administration \u003e Domains section, you will find your tenant ID displayed on the top right.",
    "notSetText": "This field is required",
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "domainId",
    "displayName": "Domain ID",
    "simpleValueType": true,
    "help": "Log in to your Cytrio account.  Under the Administration \u003e Domains screen, you can find the domain ID mentioned under the domain name in the Domain column.",
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ]
  },
  {
    "type": "CHECKBOX",
    "name": "noUrlPassthrough",
    "checkboxText": "Disable URL Pass Through",
    "simpleValueType": true,
    "help": "When \"URL Passthrough\" is enabled (checkbox is not checked), information about ad clicks, events and session-based analytics will be passed through URL parameters across pages, until the user sets the proper consent to store such data."
  },
  {
    "type": "PARAM_TABLE",
    "name": "regionsDefaults",
    "displayName": "GCM default consent by region",
    "paramTableColumns": [
      {
        "param": {
          "type": "TEXT",
          "name": "region",
          "displayName": "Region",
          "simpleValueType": true,
          "help": "The region expressed in ISO_3166-2 code, i.e. two letters for the country and, optionally, an en dash and two letters for its sub-region. For example, \"US-CA\". For multiple values, provide a comma-separated list, e.g.: \"US-CA,US-VA,US,DE\". Leave empty for worldwide configuration."
        },
        "isUnique": false
      },
      {
        "param": {
          "type": "SELECT",
          "name": "ad_storage",
          "displayName": "Ad Storage",
          "macrosInSelect": true,
          "selectItems": [
            {
              "value": "granted",
              "displayValue": "Granted"
            },
            {
              "value": "denied",
              "displayValue": "Denied"
            }
          ],
          "simpleValueType": true,
          "help": "Enables storage (such as cookies) related to advertising.",
          "defaultValue": "denied"
        },
        "isUnique": false
      },
      {
        "param": {
          "type": "SELECT",
          "name": "analytics_storage",
          "displayName": "Analytics Storage",
          "macrosInSelect": true,
          "selectItems": [
            {
              "value": "granted",
              "displayValue": "Granted"
            },
            {
              "value": "denied",
              "displayValue": "Denied"
            }
          ],
          "simpleValueType": true,
          "help": "Enables storage (such as cookies) related to analytics e.g. visit duration.",
          "defaultValue": "denied"
        },
        "isUnique": false
      },
      {
        "param": {
          "type": "SELECT",
          "name": "functionality_storage",
          "displayName": "Functionality Storage",
          "macrosInSelect": true,
          "selectItems": [
            {
              "value": "denied",
              "displayValue": "Denied"
            },
            {
              "value": "granted",
              "displayValue": "Granted"
            }
          ],
          "simpleValueType": true,
          "defaultValue": "denied",
          "help": "Enables storage that supports the functionality of the website or app e.g. language settings."
        },
        "isUnique": false
      },
      {
        "param": {
          "type": "SELECT",
          "name": "personalization_storage",
          "displayName": "Personalization Storage",
          "macrosInSelect": true,
          "selectItems": [
            {
              "value": "denied",
              "displayValue": "Denied"
            },
            {
              "value": "granted",
              "displayValue": "Granted"
            }
          ],
          "simpleValueType": true,
          "defaultValue": "denied",
          "help": "Enables storage related to personalization e.g. video recommendations."
        },
        "isUnique": false
      },
      {
        "param": {
          "type": "SELECT",
          "name": "security_storage",
          "displayName": "Security Storage",
          "macrosInSelect": true,
          "selectItems": [
            {
              "value": "denied",
              "displayValue": "Denied"
            },
            {
              "value": "granted",
              "displayValue": "Granted"
            }
          ],
          "simpleValueType": true,
          "defaultValue": "granted",
          "help": "Enables storage related to security such as authentication functionality, fraud prevention, and other user protection."
        },
        "isUnique": false
      },
      {
        "param": {
          "type": "SELECT",
          "name": "ad_user_data",
          "displayName": "Share User Data For Ads",
          "macrosInSelect": true,
          "selectItems": [
            {
              "value": "denied",
              "displayValue": "Denied"
            },
            {
              "value": "granted",
              "displayValue": "Granted"
            }
          ],
          "simpleValueType": true,
          "defaultValue": "denied",
          "help": "Sets consent for sending user data to Google for advertising purposes."
        },
        "isUnique": false
      },
      {
        "param": {
          "type": "SELECT",
          "name": "ad_personalization",
          "displayName": "Personalize Ads",
          "macrosInSelect": true,
          "selectItems": [
            {
              "value": "denied",
              "displayValue": "Denied"
            },
            {
              "value": "granted",
              "displayValue": "Granted"
            }
          ],
          "simpleValueType": true,
          "defaultValue": "denied",
          "help": "Sets consent for personalized advertising."
        },
        "isUnique": false
      }
    ],
    "help": "For Google Consent Mode to work, initial/default values must be set. You can change them here, applying a different setting to each region or the same can be done within the Cytrio admin console under Consent banner targeting."
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

// Enter your template code here.
const gtagSet = require('gtagSet');
const log = require('logToConsole');
const queryPermission = require('queryPermission');
const getCookieValues = require('getCookieValues');
const injectScript = require('injectScript');
const COOKIE_NAME='cyt-consent';
const setDefaultConsentState = require('setDefaultConsentState');
const makeNumber = require('makeNumber');
const encodeUri = require('encodeUri');
const wait_for_update = 500;
const Object = require('Object');
const updateConsentState = require('updateConsentState');
let regionDefaultSet=false;


const getBooleanOrUndefined = (v) => {
  if (typeof v === 'undefined') return undefined;
  return v === 'true';
};

const transformToConsent = (stringConsent) => {
  if (!stringConsent) return undefined;
  const data = {};
  stringConsent.split('|').map((v) => v.split('=')).forEach((v) => {
    data[v[0]] = v[1];
  });
 
  
  return {
    state: {
      
      ad_storage: data.marketing === 'true' ? 'granted': 'denied',
      analytics_storage: data.analytics === 'true' ? 'granted' : 'denied',
      functionality_storage: data.functional === 'true' ? 'granted' : 'denied',
      personalization_storage: data.functional === 'true' ? 'granted' : 'denied',
      security_storage: data.necessary === 'true' ? 'granted' : 'denied',
      ad_user_data: data.marketing === 'true' ? 'granted': 'denied',
      ad_personalization: data.marketing === 'true' ? 'granted': 'denied',
      wait_for_update: wait_for_update,
    },
    others: {
      ads_data_redaction: !data.marketing,
      url_passthrough: (!data.marketing || !data.functional) 
    },
  };
};

//region related default consent
const buildRegions = (userConfigs, builtInConfigs) => {
  const regionsConfigured = {};

  const regionsDefaults = (userConfigs || []).map((r) => {
    r.wait_for_update = wait_for_update;
    if (r.region.length === 0) {
      regionsConfigured.global = true;
      Object.delete(r, "region");
      return r;
    }
    
    r.region = r.region.split(',').map((reg) => reg.toUpperCase());
    r.region.forEach((reg) => { regionsConfigured[reg] = true; });
    return r;
  });

  const builtInRegions = builtInConfigs.map((r) => {
    if (r.region) {
      r.region = r.region.filter((reg) => !regionsConfigured[reg]);
    } else if (regionsConfigured.global) {
      r.region = [];
    }
    r.ad_storage = r.value;
    r.analytics_storage = r.value;
    r.functionality_storage = r.value;
    r.personalization_storage = r.value;
    r.security_storage = (r.region === undefined) ? 'granted': r.value;
    r.ad_user_data = r.value;
    r.ad_personalization = r.value;
    r.wait_for_update = wait_for_update;
    Object.delete(r, "value");
    return r;
  }).filter((r) => r.region === undefined || r.region.length > 0);

  regionsDefaults.forEach((r) => builtInRegions.push(r));
  const sorted = builtInRegions.sort((a, b) => {
    if (a.region === undefined || !a.region.every((r) => r.length > 2)) return 1;
    return -1;
  });
  return sorted;  
};

const baseRegions = [
  
    { region: ['US-CA'], value: 'granted' },
    { value: 'denied' }
];

const regions = buildRegions(data.regionsDefaults, baseRegions);

if (regions !== undefined) {
 
  regions.forEach((state) => {
    setDefaultConsentState(state);
    regionDefaultSet=true;
  });
} 

////////////////////////////////////////////////////////////////////////


const scriptSrc='https://cytriocpmprod.blob.core.windows.net/cytrio-public/cookiescript/'+ encodeUri(data.tenantId)+'/'+encodeUri(data.domainId)+'/script.js?urlPassthrough='+!data.noUrlPassthrough;

if (!queryPermission('inject_script', scriptSrc))
   return data.gtmOnFailure();
injectScript(scriptSrc, data.gtmOnSuccess, data.gtmOnFailure);

const consentStr = queryPermission('get_cookies', COOKIE_NAME) ?       getCookieValues(COOKIE_NAME, true)[0] : undefined;
   
const consent = transformToConsent(consentStr);

if (typeof consent !== 'undefined') {
    if (!regionDefaultSet) {
       setDefaultConsentState(consent.state);
    }
    
    updateConsentState({
                'ad_storage': consent.marketing,
                'ad_user_data': consent.marketing,
                'ad_personalization': consent.marketing,
                'analytics_storage': consent.analytics,
                'functionality_storage': consent.functional,
                'personalization_storage': consent.functional,
                'security_storage': consent.necessary
            });

}

const urlPassthrough = !data.noUrlPassthrough && (!consent || consent.others.url_passthrough);


gtagSet({
  ads_data_redaction: !consent || consent.others.ads_data_redaction,
  url_passthrough: urlPassthrough,
  'developer_id.dY2Y5Zj': true,
});


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "all"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://cytriocpmprod.blob.core.windows.net/*"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "get_cookies",
        "versionId": "1"
      },
      "param": [
        {
          "key": "cookieAccess",
          "value": {
            "type": 1,
            "string": "specific"
          }
        },
        {
          "key": "cookieNames",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "cyt-consent"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_consent",
        "versionId": "1"
      },
      "param": [
        {
          "key": "consentTypes",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "ad_storage"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "analytics_storage"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "functionality_storage"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "personalization_storage"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "security_storage"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "ad_user_data"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "ad_personalization"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "write_data_layer",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keyPatterns",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "ads_data_redaction"
              },
              {
                "type": 1,
                "string": "url_passthrough"
              },
              {
                "type": 1,
                "string": "developer_id.dY2Y5Zj"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []


___NOTES___

Created on 13/12/2024, 12:50:50
